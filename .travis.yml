language: android
jdk:
- oraclejdk8
android:
  components:
  - tools
  - platform-tools
  - build-tools-28.0.2
  - android-28
  - extra-google-m2repository
  - extra-android-m2repository
before_install:
- openssl aes-256-cbc -K $encrypted_405ece2f58e0_key -iv $encrypted_405ece2f58e0_iv
  -in files/ctf.tar.enc -out files/ctf.tar -d
- tar xvf files/ctf.tar
- chmod +x gradlew
- export JAVA8_HOME=/usr/lib/jvm/java-8-oracle
- export JAVA_HOME=$JAVA8_HOME
- mkdir "$ANDROID_HOME/licenses" || true
- echo -e "\n8933bad161af4178b1185d1a37fbf41ea5269c55" > "$ANDROID_HOME/licenses/android-sdk-license"
- echo -e "\n84831b9409646a918e30573bab4c9c91346d8abd" > "$ANDROID_HOME/licenses/android-sdk-preview-license"
after_success:
- chmod +x ./generate-apk-release.sh
- "./generate-apk-release.sh"
script:
- cd $TRAVIS_BUILD_DIR/
- "./gradlew assembleRelease"
notifications:
  email: false
sudo: false
cache:
  directories:
  - "$HOME/.m2"
env:
  global:
    secure: mqj5JUiLaTG3OYgLrSYUPTyOOLHgjc0lNYKuNsSy4WXSlZAwOASS8ob3zUBohJ/YoliEacq0X4kZwSRjqkq6kxlgBJx1X74hI5VwbSF+jMzXN67FYH/OCQE2SlFK7Mop52s55uyoxE1NHgBHMwb7DP2gxDJgKjBpVK/h9i5+PCe1HoHFIlK+W1XTBwuFUIyZ++0Oa68ZDC0UcYAO/xLyqtYqzQSPd40CooSMonwOXUU+6z0VXq3VHmlfmY5hvnJT0tcR7xt3SvgvW7ugJHSwgqvc09cXrisNC6ZW7HVBktGKgTabOoqP/eEk5tKxR8fTv7q5kfVMmuujw06cb3ruM2QGkFaKzRYByIYi7H9TIlDtOUSNtoeBe0spWShdFIBJAkxZt0ieyoKGkyUAuIdT7ifTaGbEGGT1H9EEUJa0Z1PJpDFB0EpzEVb7mDygq6l30ePkBs1A12+6IAwvybiItp1WVDvI/u2L8shDFnIdch1hYCsQbnEjtTKO2UptHJPzmi6U42RGx0XenhjSGBTeajvHFSG7gq4Q6WcUuHcx1vcYZu10BN4J8kuoG7AQLqlv2LL8XzLVdUN/6G4IJtXp0Gck6CkghoQJlmABlPSjGSjaT3txnXaojXY6ljO7sOhHtDxTj5tWDtYRleoVvrlQr42jTKIzksXG2JrmjfzNmc8=
